<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Learning from blog | programmerraja blog</title>
<meta property="og:title" content="Learning from blog | programmerraja blog" />
<meta name="twitter:title" content="Learning from blog | programmerraja blog" />
<meta itemprop="name" content="Learning from blog | programmerraja blog" />
<meta name="application-name" content="Learning from blog | programmerraja blog" />
<meta property="og:site_name" content="" />

<meta name="description" content="">
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="https://programmerraja.github.io/blog" />
  <meta property="og:image" content="https://programmerraja.github.io/blog" />
  <meta name="twitter:image" content="https://programmerraja.github.io/blog" />
  <meta name="twitter:image:src" content="https://programmerraja.github.io/blog" />





<meta name="generator" content="Hugo 0.121.2">

    

    <link rel="canonical" href="https://programmerraja.github.io/blog/notes/2024/learning-from-blog/">
    <link href="/blog/style.min.4ac6cf0a45f597bb04ee3889f23da86b8f4067503e71f64bc0581c8ad628ba44.css" rel="stylesheet">
    <link href="/blog/code-highlight.min.4e1b30df3607fab6faaa068536572415b0ea6c4b3a10dfd609e0d070bdd7546d.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/blog/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/blog/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/blog/favicon.ico">




<link rel="manifest" href="https://programmerraja.github.io/blog/site.webmanifest">

<meta name="msapplication-config" content="/blog/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/blog/icons/favicon.svg">

    
    </head>
<body data-theme = "" class="notransition">
        <main class="main">

<script src="/blog/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://programmerraja.github.io/blog/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title></title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/blog/post/">
                        Posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/blog/notes/">
                        Notes
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/blog/search/">
                        Search
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/blog/tags/">
                        Tags
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    
                </li>
            </ul>
            <a id="mode" href="#">
                
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Learning from blog</h1>
                
                
                <div class="post-meta">
                    <time datetime="2024-01-01T08:19:32&#43;05:30" itemprop="datePublished"> Jan 1, 2024 </time>
                </div>
                
            </header><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#how-linkedin-adopted-protocol-buffers-to-reduce-latency-by-60httpsnewslettersystemdesignonepprotocol-buffers-vs-json" aria-label="How LinkedIn Adopted Protocol Buffers to Reduce Latency by 60%">How LinkedIn Adopted Protocol Buffers to Reduce Latency by 60%</a></li>
                <li>
                    <a href="#scaling-slacks-job-queuehttpsslackengineeringscaling-slacks-job-queue" aria-label="Scaling Slack’s Job Queue">Scaling Slack’s Job Queue</a></li>
                <li>
                    <a href="#hashnodes-overall-architecturehttpsengineeringhashnodecomhashnodes-overall-architecture" aria-label="Hashnode&rsquo;s Overall Architecture">Hashnode&rsquo;s Overall Architecture</a></li>
                <li>
                    <a href="#scaling-cron-monitoringhttpssentryengineeringblogscaling-cron-monitoring" aria-label="Scaling Cron Monitoring">Scaling Cron Monitoring</a></li>
                <li>
                    <a href="#-an-overview-of-cloudflares-logging-pipelinehttpsblogcloudflarecoman-overview-of-cloudflares-logging-pipeline" aria-label=" An overview of Cloudflare&rsquo;s logging pipeline"> An overview of Cloudflare&rsquo;s logging pipeline</a>
                </li>
            </ul>
        </div>
    </details>
</div><div class="page-content">
                <h2 id="how-linkedin-adopted-protocol-buffers-to-reduce-latency-by-60httpsnewslettersystemdesignonepprotocol-buffers-vs-json"><strong><a href="https://newsletter.systemdesign.one/p/protocol-buffers-vs-json">How LinkedIn Adopted Protocol Buffers to Reduce Latency by 60%</a></strong></h2>
<ul>
<li>They heavly using microservice to avoid the latency between the service they go with protocol buffers</li>
<li>Protocol buffer (<strong>Protobuf</strong>) is a data serialization format and a set of tools to exchange data. Protobuf keeps data and the metadata separate. And serializes data into binary format.</li>
<li>Use Protobuf when:
<ul>
<li>Payload is big</li>
<li>Communication between non-JavaScript environments needed</li>
<li>Frequent changes to the payload schema expected</li>
</ul>
</li>
</ul>
<h2 id="scaling-slacks-job-queuehttpsslackengineeringscaling-slacks-job-queue"><strong><a href="https://slack.engineering/scaling-slacks-job-queue/">Scaling Slack’s Job Queue</a></strong></h2>
<ul>
<li>They using <a href="https://redis.com/glossary/redis-queue/">redis queue</a> for all async operation they have face few issue with that such as <strong>Operational Memory Constraints in Redis, Complex Redis Connection Structure ,Worker Scalability Dependency on Redis etc</strong></li>
<li>Instead fully replace with kafa they go step by step.First they push message to kafa and from kafa they have written JQRelay which is a stateless service written in Go that relays jobs from a Kafka topic to its corresponding Redis cluster.</li>
<li>When a JQRelay instance starts up, it attempts to acquire a <a href="https://www.consul.io/">Consul</a> lock on an key/value entry corresponding to the Kafka topic. If it gets the lock, it starts relaying jobs from all partitions of this topic.</li>
</ul>
<h2 id="hashnodes-overall-architecturehttpsengineeringhashnodecomhashnodes-overall-architecture"><strong><a href="https://engineering.hashnode.com/hashnodes-overall-architecture">Hashnode&rsquo;s Overall Architecture</a></strong></h2>
<ul>
<li>They caching mechanism
<ul>
<li>page cache using next js</li>
<li>API cache using <code>GraphQL Edge Caching with Stellate</code> and <code>Serverless Function Caching with Vercel</code></li>
</ul>
</li>
</ul>
<h2 id="scaling-cron-monitoringhttpssentryengineeringblogscaling-cron-monitoring"><strong><a href="https://sentry.engineering/blog/scaling-cron-monitoring">Scaling Cron Monitoring</a></strong></h2>
<ul>
<li>
<p>They have Relay which listen for check in and other event from cron and push to kafa</p>
</li>
<li>
<p>Sentry Django application will consume from and do the heavy lifting of storing and processing those check-ins</p>
</li>
<li>
<p>To inform the user about missed check in they written a job which run for a minute and checks on table whether it has check in if it not inform the user but it have 2 problem</p>
<ul>
<li>Assume due to overload in kafa consumer get consumed later but the job runs before and assume it has not checked in</li>
<li>During deploys of the celery beat scheduler, there is a short period where tasks may be skipped.</li>
</ul>
</li>
<li>
<p>Their solution involved leveraging the timestamp of each check-in message to determine when all check-ins up to a minute boundary had been processed. They tracked the last time a minute boundary was crossed based on these timestamps. Once they reached a new minute boundary, they knew all check-ins before that moment had been consumed.</p>
<p>For instance, imagine a sequence of check-in messages with timestamps:</p>
<ul>
<li>Message 1: Timestamp 12:03:20</li>
<li>Message 2: Timestamp 12:03:45</li>
<li>Message 3: Timestamp 12:04:02</li>
</ul>
<p>When Message 3 arrives, it crosses the minute boundary of 12:04. This signals that all check-ins before 12:04 have been processed. This event becomes the trigger to generate tasks for detecting missing check-ins, eliminating the need for periodic celery beat tasks. This way, they avoid skipping tasks during deployment and accurately detect missed check-ins even during Kafka backlog scenarios.</p>
</li>
</ul>
<h2 id="-an-overview-of-cloudflares-logging-pipelinehttpsblogcloudflarecoman-overview-of-cloudflares-logging-pipeline"><a href="https://blog.cloudflare.com/an-overview-of-cloudflares-logging-pipeline"> An overview of Cloudflare&rsquo;s logging pipeline</a></h2>
<ul>
<li>
<p>They used BSD syslog protocol to send the log from system</p>
</li>
<li>
<p> <a href="https://github.com/syslog-ng/syslog-ng">Syslog-ng </a> is a daemon that implements the aforementioned BSD syslog protocol. In our case, it reads logs from journald, and applies another layer of rate limiting. It then applies rewriting rules to add common fields, such as the name of the machine that emitted the log, the name of the data center the machine is in</p>
</li>
<li>
<p>Logs are pushed to Kafka</p>
</li>
<li>
<p>Logs stored in ELK stack, and a Clickhouse cluster</p>
<ul>
<li>ElasticSearch with 90 cluster</li>
<li>Clickhouse with 10 Nodes of cluster</li>
</ul>
</li>
</ul>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/programmerraja" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://twitter.com/programmerraja" target="_blank" rel="noopener noreferrer me"
    title="Twitter">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
</a>
<a href="https://www.linkedin.com/in/programmerraja/" target="_blank" rel="noopener noreferrer me"
    title="Linkedin">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
    <rect x="2" y="9" width="4" height="12"></rect>
    <circle cx="4" cy="4" r="2"></circle>
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me"
    title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2024 K.Boopathi.
        
    </small>
</footer><a href="#" title="" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    






    
    <script src="https://programmerraja.github.io/blog/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js" integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30&#43;lSNuSkl4QXuNyy8="></script>

    

</main>
    </body>
</html>
